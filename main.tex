%! TeX program = lualatex
\documentclass{scrartcl}
\usepackage[left=4cm,right=3cm,top=3cm,bottom=3cm, marginpar=3cm]{geometry}
\setlength{\parindent}{0pt}
\setlength{\parskip}{1ex}

\usepackage{cprotect}
\usepackage{tikz}
\usetikzlibrary{math}

\usepackage{xcolor}
\usepackage{soul}

\usepackage{hyperref}
\hypersetup{
    pdftitle={Easy colorblind-safe typesetting: the colorblind package},
    pdfauthor={Simon Pfahler},
}
\usepackage{cleveref}

\usepackage{csquotes}
\usepackage[backend=biber, style=numeric-comp, seconds=true, sorting=none, subentry=true, doi=false, alldates=iso]{biblatex}
\renewcommand*{\entrysetpunct}{\\[5pt]}
\addbibresource{bib.bib}

\usepackage[Tol, OkabeIto]{colorblind}

\newcommand\colorblind{\textbf{colorblind} }
\newcommand\hlc[2][T-Q-PH4]{{%
    \colorlet{foo}{#1}%
    \sethlcolor{foo}\hl{#2}}%
}

\reversemarginpar
\newcommand\marg[1]{\leavevmode\marginpar{\raggedleft #1}}
\newcommand\tbs{\textbackslash}

\title{Easy colorblind-safe typesetting:\\ the \colorblind package}
\author{Simon Pfahler}
\date{\today\\Version 0.1}


\begin{document}

\maketitle

\begin{abstract}
    In colorblind-safe documents, the contents are presented in a way that the same information is conveyed to readers regardless of a potential color vision deficiency.
    This package provides the tools necessary for color-agnostic typesetting in \LaTeX.
    It provides color schemes for a wide range of applications.
    The most commonly used schemes are qualitative schemes, providing easily distinguishable colors for use in graphics, but also for text coloring or highlighting.
    Additionally, diverging and sequential schemes are included which can be used for encoding quantitative information in the colors of a graphic.
    Therefore, colorblind-safeness is incorporated into the writing process, making it both less cumbersome and less error-prone.
\end{abstract}

\tableofcontents
\clearpage

\section{Introduction}
\cprotect\marg{\verb!Tol!\\\verb!OkabeIto!}%
The \colorblind package provides the color schemes by Paul Tol~\cite{Tol} and the Okabe Ito color palette~\cite{Ichihara_2008}.
By default, no schemes are loaded.
Providing one of the options \verb!Tol! or \verb!OkabeIto! loads all corresponding schemes.

As an example for how to use the colors, we look at the \emph{bright qualitative} color scheme by Tol.
\cref{fig:T-Q-Bexample} shows the colors in the scheme

\begin{figure}[ht]
    \centering
    \drawScheme{T-Q-B}
    \caption{Bright qualitative color scheme by Tol.}
    \label{fig:T-Q-Bexample}
\end{figure}

All colors in this model start with \verb!T-Q-B!, indicating that it is a scheme by \textbf{T}ol, that it is a \textbf{q}ualitative scheme, and that it is the \textbf{b}right scheme.
The colors in the scheme are specified by a number following the scheme name, in this case ranging from \verb!T-Q-B1! to \verb!T-Q-B6! for the non-grey colors.
The additional color \verb!T-Q-B0! provides a color that can be used, e.g., to indicate bad data.

There are two reasons why color names are not based on natural color names (e.g., \hlc[T-Q-PH1]{blue}):
\begin{enumerate}
    \item Certain colors (\hlc[T-Q-PH3]{green}, \hlc[T-Q-PH5]{red}) are often used by people with full color vision to convey certain meanings (\hlc[T-Q-PH3]{good}, \hlc[T-Q-PH5]{bad}).
        This meaning is difficult for people with color-deficiencies to pick up.
        By not using natural color names, it is easier to write colorblind-safe documents that do not make use of said connotations.
    \item Natural color names can be cumbersome, e.g., when multiple variations of a primary color are used. It is annoying having to look up if a color is called, e.g., \hlc[T-Q-PH1]{blue} or \hlc[T-Q-PH2]{cyan}.
\end{enumerate}

These colors are used the same way as any other colors. To change the text color to \verb!T-Q-B1! for example, use \verb!\color{T-Q-B1}!.

\section{Guidelines}
On its own, using colorblind-safe colors is not sufficient for making a document truly colorblind-safe.
This section provides some general rules to follow for colorblind-safe typesetting.

These rules apply to each visual unit of a document individually.
A visual unit may be a graphic, a table or a paragraph of text.
It might be advisable to be consistent also between different visual units (e.g., use the same color scheme for all graphics), but this is more of an aesthetic argument and is not strictly necessary for a colorblind-safe document.

The most important rules are, in this order:
\begin{enumerate}
    \item \hlc{Do not mix the colors in qualitative schemes!}\newline
        The colors in each scheme are defined with the purpose of being easily distinguishable.
        Mixing of colors, e.g., \verb?T-Q-B1!50!T-Q-B5? interferes with this.
        A special case of this is that qualitative colors should not be used for quantitative information.
        In this case, an appropriate non-qualitative color scheme (i.e.\ a diverging or sequential scheme) should be used.
    \item \hlc{Only use colors from one color scheme for a given visual unit!}\newline
        The colors between different schemes are not tuned to be distinguishable.
        Using colors from multiple schemes therefore defies the point of this package.
    \item \hlc{Do not use shades of colors!}\newline
        Saturation and brightness are also used for distinguishability, so mixings involving \verb!white! and \verb!black! should also be avoided.
\end{enumerate}

The first two rules should be ensured in any visual unit. If the need for more colors arises, a different color scheme should be used alltogether.
While the third rule should also be followed in most scenarios, there are some situations that might allow for breaking this rule. As an example, consider \cref{fig:errorbar_plot}, where the error band is colored with a lighter shade of the original color.
This is ok because only few colors are used in the plot and the colors are not necessary for conveying the message of the plot.

\begin{figure}[ht]
    \centering
    \includegraphics{Graphics/errorbar_plot/errorbar_plot.pdf}
    \cprotect\caption{This plot breaks rule 3 by using the shade \verb?T-Q-B5!20? for the error band of the reference, but it is still colorblind-safe.}
    \label{fig:errorbar_plot}
\end{figure}

There are additional guidelines that should be kept in mind when typesetting colorblind-safe documents.
Depending on the specific visual unit, they are usually not as vital as the rules stated above.
In no particular order, they are:
\begin{itemize}
    \item \hlc{Do not convey information only through color!}\newline
        When possible, encode the information the color provides also in a different way, e.g., through text, patterns or symbols.
    \item \hlc{Do not use color for information and aesthetics simultaneously!}\newline
        Color is often also used for aesthetic reasons, e.g., on a scientific poster.
        While this is ok in principle, do not mix information and aesthetics within the same visual unit, as this makes it more difficult to extract the encoded information.
\end{itemize}

\section{Provided color schemes}\label{sec:colors}
The color schemes provided are split into three groups:
\begin{itemize}
    \item Qualitative schemes:\newline
        These schemes are used to convey qualitative information, such as different data sources, countries or manufacturers.
        They should usually be used for coloring text or distinguishing different lines in a plot.
    \item Diverging color schemes:\newline
        When quantitative data ranges between two extremes, and the middle is being considered ``neutral'', a diverging color scheme should be used.
        Examples for this kind of data might be test grades, temperatures or pH values.
    \item Sequential color schemes:\newline
        For quantitative data without an important midpoint, sequential color schemes should be preferred over diverging ones.
        They can be used to denote for example velocities, concentrations or pressures.
\end{itemize}

For each of these schemes, this package provides a range of options.
\Cref{sec:Tol_schemes} shows the schemes designed by Paul Tol~\cite{Tol}, which include qualitative, diverging and sequential schemes (see \cref{sec:T-Q,sec:T-D,sec:T-S}).
In \cref{sec:OkabeIto}, the Okabe Ito color scheme~\cite{Ichihara_2008} is provided, which is probably the most famous qualitative colorblind-safe color scheme due to various articles in high-ranking journals.

All of the schemes are colorblind-safe, and some are optimized for printout or designed for a particular purpose.
This is denoted under the scheme name

\subsection{Paul Tol's color schemes}\label{sec:Tol_schemes}

\subsubsection{Qualitative color schemes}\label{sec:T-Q}
\begin{minipage}{0.5\textwidth}
    \centering
    \scalebox{0.7}{\drawScheme{T-Q-B}}\\
    Bright\\
    \phantom{pb}
\end{minipage}\hfill%
\begin{minipage}{0.5\textwidth}
    \centering
    \scalebox{0.7}{\drawScheme{T-Q-V}}\\
    Vibrant
\end{minipage}

\begin{minipage}{0.5\textwidth}
    \centering
    \scalebox{0.7}{\drawScheme{T-Q-HC}}\\
    High-Contrast\\
    works for black and white printout
\end{minipage}\hfill%
\begin{minipage}{0.5\textwidth}
    \centering
    \scalebox{0.7}{\drawScheme{T-Q-MC}}\\
    Medium-Contrast\\
    works for black and white printout
\end{minipage}

\begin{center}
    \scalebox{0.7}{\drawScheme{T-Q-M}}\\
    Muted
\end{center}

\begin{minipage}{0.5\textwidth}
    \centering
    \scalebox{0.7}{\drawScheme{T-Q-PH}}\\
    Pale Highlight\\
    specifically for text background
\end{minipage}\hfill%
\begin{minipage}{0.5\textwidth}
    \centering
    \scalebox{0.7}{\drawScheme{T-Q-DT}}\\
    Dark Text\\
    specifically for text color
\end{minipage}

\begin{center}
    \scalebox{0.7}{\drawScheme{T-Q-L}}\\
    Light\\
    less distinguishable than other schemes,\\ mostly meant for filling in labelled cells
\end{center}

\subsubsection{Diverging color schemes}\label{sec:T-D}
For diverging schemes, when a continuous palette is needed, the colors are allowed to be linearly interpolated.

\begin{center}
    \scalebox{0.7}{\drawScheme{T-D-S}}\\
    Sunset
\end{center}

\begin{center}
    \scalebox{0.7}{\drawScheme{T-D-N}}\\
    Nightfall
\end{center}

\begin{center}
    \scalebox{0.7}{\drawScheme{T-D-BR}}\\
    BuRd
\end{center}

\subsubsection{Sequential color schemes}\label{sec:T-S}
For most sequential schemes, a continuous palette can be obtained again by linearly interpolating the colors.
The only exception to this is the \emph{discrete rainbow} scheme, which has an explicitly continuos variation, the \emph{smooth rainbow} scheme.%

\begin{center}
    \scalebox{0.7}{\drawScheme{T-S-YOB}}\\
    YlOrBr
\end{center}

\begin{center}
    \scalebox{0.7}{\drawScheme{T-S-IR}}\\
    IRidescent
\end{center}

\begin{center}
    \scalebox{0.7}{\drawScheme{T-S-IN}}\\
    INcandescent\\
    not print-friendly
\end{center}

\begin{center}
    \scalebox{0.7}{\drawScheme{T-S-DR}}\\
    Discrete Rainbow\\
    Do not interpolate!
\end{center}

\begin{center}
    \scalebox{0.7}{\drawScheme{T-S-SR}}\\
    Smooth Rainbow\\
\end{center}

\subsection{Okabe Ito qualitative color scheme}\label{sec:OkabeIto}
This is the qualitative color scheme commonly known as the \emph{Okabe Ito} color palette~\cite{Ichihara_2008}.

\begin{center}
    \scalebox{0.7}{\drawScheme{OI}}\\
    Okabe Ito
\end{center}

\subsection{Provided commands}
\cprotect\marg{\verb!\drawScheme{...}!}%
The discrete visualizations of color schemes given in this documentation are created with the command \verb!\drawScheme{...}!.
The name of the color scheme should be provided to the command, e.g.\ \verb!\drawScheme{T-Q-B}! to print the qualitative bright scheme by Tol.

\printbibliography

\end{document}
